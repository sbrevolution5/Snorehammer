@using Snorehammer.Web.Components.Simulation.DiceRoller
@using Snorehammer.Web.FrontendModels
@using Snorehammer.Web.Services

<RadzenTable GridLines="DataGridGridLines.Both" AllowAlternatingRows="true">
    <RadzenTableHeader>
        <RadzenTableHeaderRow>
            <RadzenTableHeaderCell>
                Stat
            </RadzenTableHeaderCell>
            <RadzenTableHeaderCell>
                Fight 1
            </RadzenTableHeaderCell>
            @if (sim2 is not null)
            {
                <RadzenTableHeaderCell>
                    Fight 2
                </RadzenTableHeaderCell>
            }
        </RadzenTableHeaderRow>
    </RadzenTableHeader>
    <RadzenTableBody>
        <RadzenTableRow>
            <RadzenTableCell>
                Attacks Made
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.AttackNumber
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.AttackNumber, sim2.Stats.AttackNumber)">
                    @sim.Stats.AttackNumber
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.AttackNumber, sim.Stats.AttackNumber)">
                    @sim2.Stats.AttackNumber
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Attacks Hit
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.AttacksHit
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.AttacksHit, sim2.Stats.AttacksHit)">
                    @sim.Stats.AttacksHit
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.AttacksHit, sim.Stats.AttacksHit)">
                    @sim2.Stats.AttacksHit
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Wounds inflicted
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.WoundsInflicted
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.WoundsInflicted, sim2.Stats.WoundsInflicted)">
                    @sim.Stats.WoundsInflicted
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.WoundsInflicted, sim.Stats.WoundsInflicted)">
                    @sim2.Stats.WoundsInflicted
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Armor Saves Failed
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.ArmorSavesFailed
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.ArmorSavesFailed, sim2.Stats.ArmorSavesFailed)">
                    @sim.Stats.ArmorSavesFailed
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.ArmorSavesFailed, sim.Stats.ArmorSavesFailed)">
                    @sim2.Stats.ArmorSavesFailed
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Damage Applied
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.DamageNumber
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.DamageNumber, sim2.Stats.DamageNumber)">
                    @sim.Stats.DamageNumber
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.DamageNumber, sim.Stats.DamageNumber)">
                    @sim2.Stats.DamageNumber
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Feel No Pain Successful
            </RadzenTableCell>

            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.FeelNoPainMade
                </RadzenTableCell>  
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.FeelNoPainMade, sim2.Stats.FeelNoPainMade)">
                    @sim.Stats.FeelNoPainMade
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.FeelNoPainMade, sim.Stats.FeelNoPainMade)">
                    @sim2.Stats.FeelNoPainMade
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Models Destroyed
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.ModelsDestroyed
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.ModelsDestroyed, sim2.Stats.ModelsDestroyed)">
                    @sim.Stats.ModelsDestroyed
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.ModelsDestroyed, sim.Stats.ModelsDestroyed)">
                    @sim2.Stats.ModelsDestroyed
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Fights Where Unit destroyed
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.UnitEntirelyDestroyed
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.UnitEntirelyDestroyed, sim2.Stats.UnitEntirelyDestroyed)">
                    @sim.Stats.UnitEntirelyDestroyed
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.UnitEntirelyDestroyed, sim.Stats.UnitEntirelyDestroyed)">
                    @sim2.Stats.UnitEntirelyDestroyed
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Fights Where Unit Left at Half or less
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.HalfOrLess
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.HalfOrLess, sim2.Stats.HalfOrLess)">
                    @sim.Stats.HalfOrLess
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.HalfOrLess, sim.Stats.HalfOrLess)">
                    @sim2.Stats.HalfOrLess
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Fights Where Unit Damaged
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.UnitDamaged
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.UnitDamaged, sim2.Stats.UnitDamaged)">
                    @sim.Stats.UnitDamaged
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.UnitDamaged, sim.Stats.UnitDamaged)">
                    @sim2.Stats.UnitDamaged
                </RadzenTableCell>
            }
        </RadzenTableRow>
        <RadzenTableRow>
            <RadzenTableCell>
                Fights Where Unit Lost A Model
            </RadzenTableCell>
            @if (sim2 is null)
            {
                <RadzenTableCell>
                    @sim.Stats.LostAModel
                </RadzenTableCell>
            }
            else
            {
                <RadzenTableCell class="@ConditionalClassList(sim.Stats.LostAModel, sim2.Stats.LostAModel)">
                    @sim.Stats.LostAModel
                </RadzenTableCell>
                <RadzenTableCell class="@ConditionalClassList(sim2.Stats.LostAModel, sim.Stats.LostAModel)">
                    @sim2.Stats.LostAModel
                </RadzenTableCell>
            }
        </RadzenTableRow>
        @* <RadzenTableRow>
            <RadzenTableCell>
                Fights Where Attacker Died on fightback
            </RadzenTableCell>
            <RadzenTableCell>
                Value
            </RadzenTableCell>
            @if (sim2 is not null)
            {
                <RadzenTableCell>
                    @sim2.Stats.ModelsDestroyed
                </RadzenTableCell>
            }
        </RadzenTableRow> *@

    </RadzenTableBody>
</RadzenTable>
@code{
    [Parameter]
    public MultiFightSimulation sim { get; set; }
    [Parameter]
    public MultiFightSimulation sim2 { get; set; } = null;
    private string ConditionalClassList(float thisSim, float OtherSim)
    {
        if (thisSim>OtherSim)
        {
            return "bg-success";
        }
        else if (thisSim < OtherSim)
        {
            return "bg-danger";
        }
        else
        {
            return "";
        }
    }
}